<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Realizando operações em loop</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog Template">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>
    
    <!-- Theme CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/theme-1.css">

</head> 

<body>
    
        <header class="header text-center">	    
	    <h1 class="blog-name pt-lg-4 mb-0"><a href="index.html">Romulloares</a></h1>
        
	    <nav class="navbar navbar-expand-lg navbar-dark" >
           
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
			</button>

			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="profile-section pt-3 pt-lg-0">
				    <img class="profile-image mb-3 rounded-circle mx-auto" src="assets/images/profile.png" alt="image" >			
					
					<div class="bio mb-3">Oi, este é o primeiro post desse projeto ás coisas ainda estão um pouco betas aqui saca? Se achar algum BUG me chama! Boa leitura!<br><a href="about.html"></a></div><!--//bio-->
					<ul class="social-list list-inline py-3 mx-auto">
			            <li class="list-inline-item"><a href="https://linkedin.com/romulloares/"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://github.com/romulloares/"><i class="fab fa-github-alt fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://stackoverflow.com/users/9229964/romulo-soares"><i class="fab fa-stack-overflow fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://www.instagram.com/_romuloares/"><i class="fab fa-instagram fa-fw"></i></a></li>
			        </ul><!--//social-list-->
			        <hr> 
				</div><!--//profile-section-->
				
				<ul class="navbar-nav flex-column text-left">
					<li class="nav-item active">
					    <a class="nav-link" href="index.html"><i class="fas fa-home fa-fw mr-2"></i>Home<span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
					    <a class="nav-link" href="about.html"><i class="fas fa-user fa-fw mr-2"></i>Sobre Mim</a>
					</li>
				</ul>
			</div>
		</nav>
    </header>
    
    <div class="main-wrapper">
	    
	    <article class="blog-post px-3 py-5 p-md-5">
		    <div class="container">
			    <header class="blog-post-header">
				    <h2 class="title mb-2">Realizando operações em loop</h2>
				    <div class="meta mb-3"><span class="date">22/10/2019 - 22h45</span><span class="time">Alguém leu nos últimos 5 minutos</span><span class="comment"><a href="#">0 comments</a></span></div>
			    </header>
			    
			    <div class="blog-post-body">
				    <figure class="blog-banner">
				        <a href="https://made4dev.com"><img class="img-fluid" src="assets/images/blog/blog-post-banner.jpg" alt="image"></a>
				        <figcaption class="mt-2 text-center image-caption">Pic: <a href="https://instagram.com/glhrmarques?igshid=14b2zokhbfdh3" target="_blank">glhrmarques (Brother meu)</a></figcaption>
				    </figure>
				    <p>Geralmente eu gosto muito de sexta, é um ponto final no stress semanal para fazer algo diferente e enfim quebrar a rotina, nessa sexta em si eu ia sair com uma mina que eu estava a afim a uma boa cota já. Chamei no Instagram trocamos os números de celular, papo vai e papo vem enfim tínhamos um encontrossss. Pensei comigo: "ORRA JAO vou sair com uma menininha daora hoje", ela pediu para nos encontrarmos por volta das 21h30 na estação próxima de casa. Programei minha agenda para conseguir ver ela a tempo, porém bem na hora de ir embora, um amigo meu me pediu um favor: "Cara tenho 3 discos com cerca de 50-60 faixas em cada, você pode converter o formato de todas para mp3?"</p>
				    <p>Pensei comigo mesmo: "PQP me lasquei zzz", mas esse cara é sensacional não poderia deixar ele na mão, então acatei a tarefa. Tinha cerca de 30 min para fazer isso, considerando a taxa de transferência dos discos e minha ida ao banheiro me deixaram com 20 minutos úteis para alguma coisa, embora sempre eu me atrase para compromissos, odeio fazer isso e hoje estava destinado a não fazer. Depois que fui ao banheiro e fiz as cópias dos discos para minha área de trabalho. Tinha o primeiro problema achar um utilitário para converter as faixas para MP3 e testar para ver se aquilo realmente funcionava. Utilizo CentOS 7 então essa foi fácil de resolver utilizei o <a href="https://ffmpeg.org/ffmpeg.html" target="_blank">FFmpeg</a>, achei algumas recomendações bacanas desse cara na internet, então para colocar ele na minha máquina:</p>
				    <pre>
					    <code>
sudo yum update -y
sudo rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm
sudo yum install ffmpeg ffmpeg-devel -y
ffmpeg
					    </code>
				    </pre>
				   
				    <p>Na primeira linha atualizei o meu gerenciador de pacotes, na segunda instalei um pacote que era pré requisito dessa ferramenta utilizando <a href="https://rpm.org/documentation.html"> rpm</a>. Na terceira finalmente instalei a ferramenta e na última testei a mesma. SUCESSO! Já tinha o cara em mãos e já estava dentro da pasta onde tinha o conteúdo, contei os arquivos com um RScont (Esse comando fica para outro post rs) e voltou 183 faixas. Já estava pensando em desmarcar o encontrinho, mas não gosto de voltar atrás com minha palavra (Sim! Gosto de Naruto ksks) e pensei como eu faria para aquilo se repetir N vezes sem eu precisar ficar colocando um a um. </p>
				    <p>Para minha sorte ás faixas dos discos estavam numeradas de 1-183 o que facilitou a logica, seguindo esse modelo 1-music.wma ... 183-music.wma. Com isso já tinha algo estruturado que seria mais ou menos assim:</p>
					<h5 class="my-3">Passo a passo para resolver o problema:</h5>
				    <ul class="mb-5">
					  <li class="mb-2">Montar uma <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Guide/Regular_Expressions">RegEX</a> para indentificar esse padrão.</li>
					  <li class="mb-2">Realizar um loop para fazer em todos os arquivos do diretório.</li>
					  <li class="mb-2">E enviar para algum lugar que o meu amigo possa pegar de maneira automática.</li>
					</ul>
					<p>Com o horário passando estava pensando em deixar para lá ou para amanhã, mas ele precisava para hoje e estava contando comigo e não poderia deixar ele na mão, mesmo que faltasse cerca de 15 minutos para não me atrasar.</p>
					<h5 class="my-3">Reflexão do post:</h5>
					<blockquote class="blockquote m-lg-5 py-3 pl-4 px-lg-5">
						<p class="mb-2">"Aqueles que rompem as regras são escórias, é verdade. Mas aqueles que abandonam seus amigos são piores que a escória."</p>
						<footer class="blockquote-footer">Kakashi Hatake</footer>
					</blockquote>
					<p>Com esse pensamento do cara*** tentei me motivar a entregar a tarefa logo (não ajudou muito não akak), mas enfim voltando como na lista de arquivos apenas o número mudava entre um é outro: *-music.wma, já resolvia minha vida.</p>
                    <p>Agora tinha que executar o comando de maneira que pegasse todos os arquivos, teoricamente era simples só jogar em um for e no final zipar tudo em um único arquivo, deu um pouco de trabalho a execucao mas no final deu certo.</p>
                    <p>Por fim tinha o acesso remoto, um scp já resolvia mas e a SENHA? Como iria digitar depois? Dei outra googlada com menos de 10 min de tempo útil e achei uma solução, chumbar em uma variável isso (NÃO É NADA SEGURO E NEM RECOMENDO MAS FICA O CONHECIMENTO QUE DA KKK), foi ai que conheci um cara chamado <a href ="https://linux.die.net/man/1/sshpass">ssh-pass,</a> nativamente o scp por si só, não suporta algum parametro como senha mas com o ssh-pass sim. No final temos esse cara aqui:</p> 					
		<pre>
					    <code>
#!/bin/bash
#for para executar o comando 183 vezes para converter todas as musicas
for i in {1..183}
do
ffmpeg -i *-music.wma -acodec libmp3lame -ab 128k *-music.mp3
done
#transformando tudo em um unico arquivo 
zip tudo-em-mp3 *
#Copiando para o diretorio compartilhado que temos
sshpass -p 'password' scp /users/meuusuario/desktop/faixas/tudo-em-mp3.zip root@xxx.xxx.xxx.xxx:/tmp/
					    </code>
				    </pre>
				   <p>Joguei isso dentro de um ".sh" e executei a instrucao como "bash favor.sh", no final deu tudo certo chegou uma mensagem no meu celular "Obrigado estou te devendo uma!" e meu amigo ficou feliz por escutar suas faixas no formato desejado. Consegui passar em casa tomar um banho e ir, peguei o carro nos encontramos na estacao e... bem isso fica para mim mesmo kaka</P>
			    </div>
				    
			    <nav class="blog-nav nav nav-justified my-5">
				  <a class="nav-link-prev nav-item nav-link rounded-left" href="#">Voltar<i class="arrow-prev fas fa-long-arrow-alt-left"></i></a>
				  <a class="nav-link-next nav-item nav-link rounded-right" href="#">Proximo<i class="arrow-next fas fa-long-arrow-alt-right"></i></a>
				</nav>
				<script>
</script>
				<div class="blog-comments-section">
					<div id="disqus_thread"></div>
					<script>
					    /**
					     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT 
					     *  THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR 
					     *  PLATFORM OR CMS.
					     *  
					     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: 
					     *  https://disqus.com/admin/universalcode/#configuration-variables
					     */
					    /*
					    var disqus_config = function () {
					        // Replace PAGE_URL with your page's canonical URL variable
					        this.page.url = PAGE_URL;  
					        
					        // Replace PAGE_IDENTIFIER with your page's unique identifier variable
					        this.page.identifier = PAGE_IDENTIFIER; 
					    };
					    */
					    
					    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
					        var d = document, s = d.createElement('script');
					        
					        // IMPORTANT: Replace 3wmthemes with your forum shortname!
					        s.src = 'https://3wmthemes.disqus.com/embed.js';
					        
					        s.setAttribute('data-timestamp', +new Date());
					        (d.head || d.body).appendChild(s);
					    })();
					</script>
					<noscript>
					    Please enable JavaScript to view the 
						<script id="dsq-count-scr" src="//romulloares-github-io.disqus.com/count.js" async></script>
					    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
					        comments powered by Disqus.
					    </a>
					</noscript>
				</div><!--//blog-comments-section-->
				
		    </div><!--//container-->
	    </article>
	    

    </div><!--//main-wrapper-->   
    <!-- Javascript -->          
    <script src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script src="assets/plugins/popper.min.js"></script> 
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script> 
    
    <!-- Page Specific JS -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>

    <!-- Custom JS -->
    <script src="assets/js/blog.js"></script>
    
    <!-- Style Switcher (REMOVE ON YOUR PRODUCTION SITE) -->
    <script src="assets/js/demo/style-switcher.js"></script>     
    

</body>
</html> 

